<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memory : corx-lang</title>

    <link rel="stylesheet" href="./assets/highlight.min.css">
    <link rel="stylesheet" href="./assets/style.css">

    <script src="./assets/highlight.min.js"></script>
    <script src="./assets/script.js"></script>
</head>

<body>
    <div class="code-wrapper">
        <h1>corx</h1>
        <hr>
        <p><em>A statically typed, general-purpose programming language, crafted for simplicity and performance.</em>
        </p>
        <p><em>"Trust the programmer"</em> - <code>corx</code></p>
        <hr>
        <br>

        <nav>
            @ <- <a href="index.html">index</a>
        </nav>
        <br>

        <nav>
            @ ->
            <a href="intro.html">introduction</a>
            <a href="comments.html">comments</a>
            <a href="primitives.html">primitives</a>
            <a href="variable.html">variable & constant</a>
            <a href="array.html">array</a>
            <a href="conditionals.html">conditionals</a>
            <a href="loops.html">loops</a>
            <a href="function.html">function</a>
        </nav>
        <br>

        <nav>
            @ ->
            <a href="module.html">module</a>
            <a href="struct.html">struct</a>
            <a href="contract.html">contract</a>
            <a href="modifiers.html">modifiers</a>
            <a href="composition.html">composition</a>
            <a href="object.html">object</a>
            <a href="memory.html">memory</a>
        </nav>
        <br>

        <nav>
            @ ->
            <a href="metadata.html">metadata</a>
            <a href="proposals.html">proposals</a>
        </nav>
        <br>
        <hr>

        <h3># Memory Management</h3>
        <p></p>

        <h3># Pointer</h3>
        <p>A pointer is a special type of variable that stores the memory address of another variable. Pointer
            declarations differ from regular variable declarations. A pointer always begins with an asterisk
            (<code>*</code>) symbol, which indicates that it is a special variable designed to hold memory addresses.
        </p>

        <pre><code class="language-corx">
int *ptr;    # Declares a pointer to an integer
float *fptr; # Declares a pointer to a float
        </code></pre>

        <p>Pointers are essential for dynamic memory allocation, efficient memory management, and advanced programming
            techniques.</p>
        <br>

        <h3># Address-of Operator</h3>
        <p>The address-of operator is used to obtain the memory address of a variable. It is represented by the
            ampersand (<code>&</code>) symbol. The operator retrieves the location in memory where the value of the
            variable is stored.</p>
        <pre><code class="language-corx">
int count = 42;
int *ptr = &count; # The pointer 'ptr' now holds the address of 'count'

print(ptr); # prints the address of 'count' (e.g. 0x7ffeefbff5b0)
        </code></pre>

        <br>
        <h3># Dereferencing a Pointer</h3>
        <p>Dereferencing a pointer returns the value stored in the address, the pointer pointing at (Notice the
            (<code>*</code>) on the right side.).
        </p>
        <pre><code class="language-corx">
int count = 42;
int *ptr = &count;

print(*ptr); # print the value stored in 'count' (42)
        </code></pre>

        <br>
        <h3># Multi-level Pointer and Dereferencing</h3>
        <p>Multi-level pointers are pointers that store the address of another pointer. This allows accessing or
            manipulating data indirectly at multiple levels of indirection. Dereferencing a multi-level pointer
            retrieves the value stored at the target memory location or addresses further down the chain.
        </p>
        <p>This example demonstrates using a pointer to a pointer and how to dereference it to access values or
            addresses.</p>
        <pre><code class="language-corx">
int count = 42;
int *ptr = &count;  # 'ptr' contains address of 'count'
int *pptr = &ptr;   # 'pptr' contains address of 'ptr'

print(*ptr);  # prints the value stored in 'count' (42)
print(**ptr); # prints the address of 'count' via double dereference
        </code></pre>

        <br>
        <h3># Working with Dynamic Memory</h3>
        <p>By default <code>corx</code> variables uses static memory. So, so far in this page we only worked with static
            memory. In <code>corx</code> we have two ways to allocate dynamic memory, <code>new</code> keyword and
            <code>alloc</code> function.
        </p>

        <h4># Allocation with <code>new keyword</code></h4>
        <p>In the example below, we'll see memory allocation <code>new</code> keyword. When memory allocated with
            <code>new</code>, the address of newly allocated memory is returned on success and <code>null</code> on
            failure.
        </p>
        <pre><code class="language-corx">
struct rect {
    int width = 20;
    int height = 10;
};

rect *prect = new rect();

if (prect == null) {
    exit(1, "Allocation with new failed for rectangle."); # error code and message
}
        </code></pre>

        <br>
        <h4># Allocation with <code>alloc</code> function</h4>
        <p></p>
        <pre><code class="language-corx">
struct rect {
    int width = 20;
    int height = 10;
};

rect *prect = (rect *) alloc(sizeof rect); # cast is optional here

if (prect == null) {
    exit(1, "Allocation with alloc failed for rectangle."); # error code and message
}
        </code></pre>

        <p>Without casting:</p>
        <pre><code class="language-corx">
struct rect {
    int width = 20;
    int height = 10;
};

rect *prect = alloc(sizeof rect);

if (prect == null) {
    exit(1, "Allocation with alloc failed for rectangle."); # error code and message
}
        </code></pre>

        <br>
        <h3>Reallocation with <code>realloc</code></h3>
        <p></p>
        <pre><code class="language-corx">
        </code></pre>

        <br>
        <h3>Reallocation / Resizing with <code>resize</code></h3>
        <p></p>
        <pre><code class="language-corx">
        </code></pre>
    </div>

</body>

</html>
